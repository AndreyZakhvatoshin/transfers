# Laravel Finance Application

Это основанное на Laravel финансовое приложение, которое предоставляет возможности управления транзакциями, включая депозиты, снятие средств и переводы между пользователями.

## Функции

- **Депозит**: Добавление средств на пользовательские счета
- **Снятие**: Снятие средств с пользовательских счетов
- **Перевод**: Перевод средств между разными пользовательскими счетами
- **API-интерфейс**: RESTful API для финансовых транзакций

## Стек технологий

- **Backend**: Laravel (PHP Framework)
- **База данных**: PostgreSQL
- **Контейнеризация**: Docker & Docker Compose
- **Веб-сервер**: Nginx

## Необходимые условия

Убедитесь, что у вас установлены следующие компоненты:

- Docker
- Docker Compose

## Быстрый запуск

Проект можно легко запустить с помощью предоставленного скрипта `start.sh`:

```bash
./start.sh
```

Скрипт выполнит:
1. Проверку наличия Docker Compose
2. Создание файла `.env` из `.env.example`, если он не существует
3. Настройку хоста базы данных для Docker
4. Запуск всех контейнеров в фоновом режиме
5. Ожидание готовности PostgreSQL
6. Выполнение миграций базы данных
7. Отображение статуса работающих сервисов

## Ручная настройка

Если вы предпочитаете настроить вручную:

1. Копируем файл примера окружения:
```bash
cp backend/.env.example backend/.env
```

2. Обновляем конфигурацию базы данных в `.env`:
```env
DB_HOST=db
DB_PORT=5432
DB_DATABASE=laravel_db
DB_USERNAME=laravel
DB_PASSWORD=laravel
```

3. Создаем и запускаем контейнеры:
```bash
docker-compose up -d
```

4. Запускаем миграции базы данных:
```bash
docker-compose exec php php artisan migrate --force
```

## API Эндпоинты

Приложение предоставляет следующие эндпоинты:

- `POST /api/balance/{user}` - Просмотр баланса
- `POST /api/deposit` - Обработка депозитов
- `POST /api/withdraw` - Обработка снятия средств
- `POST /api/transfer` - Обработка переводов между пользователями

## Сервисы

Приложение состоит из следующих сервисов:

- **php**: Приложение Laravel, работающее на PHP-FPM
- **nginx**: Веб-сервер, обрабатывающий HTTP-запросы
- **db**: База данных PostgreSQL

## Порты

- **8000**: Веб-приложение (Nginx)
- **5432**: База данных PostgreSQL

## Структура проекта

```
├── backend/              # Исходный код приложения Laravel
├── docker/               # Файлы конфигурации Docker
├── compose.yml           # Конфигурация Docker Compose
├── start.sh              # Скрипт автоматического запуска
```

## Остановка приложения

Чтобы остановить все сервисы:

```bash
docker-compose down
```

## Устранение неполадок

Если вы столкнетесь с какими-либо проблемами:

1. Убедитесь, что Docker и Docker Compose правильно установлены
2. Проверьте, что порты 8000 и 5432 не используются другими приложениями
3. Проверьте логи: `docker-compose logs -f`

## Лицензия

Этот проект является открытым исходным кодом и доступен по лицензии MIT.